<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Freelance Music</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link rel="stylesheet" href="resources/styles/index.css">
</head>
<body>
    <!-- Loading Screen -->
    <div id="loadingScreen" class="loading-screen">
        <div class="loading-content">
            <div class="loading-logo-container">
                <div class="loading-logo">
                    <svg width="80" height="80" viewBox="0 0 40 40" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <defs>
                            <linearGradient id="loadingLogoGradient" x1="0%" y1="0%" x2="100%" y2="100%">
                                <stop offset="0%" style="stop-color:#1A4D2E;stop-opacity:1" />
                                <stop offset="50%" style="stop-color:#2D5A3D;stop-opacity:1" />
                                <stop offset="100%" style="stop-color:#c9a33a;stop-opacity:1" />
                            </linearGradient>
                            <filter id="loadingGlow">
                                <feGaussianBlur stdDeviation="3" result="coloredBlur"/>
                                <feMerge> 
                                    <feMergeNode in="coloredBlur"/>
                                    <feMergeNode in="SourceGraphic"/>
                                </feMerge>
                            </filter>
                        </defs>
                        <!-- Musical note with creative styling -->
                        <circle cx="20" cy="20" r="18" fill="url(#loadingLogoGradient)" filter="url(#loadingGlow)"/>
                        <circle cx="20" cy="20" r="15" fill="none" stroke="white" stroke-width="1" opacity="0.3"/>
                        
                        <!-- Musical note -->
                        <path d="M26 12v12c0 2.2-1.8 4-4 4s-4-1.8-4-4c0-2.2 1.8-4 4-4 .5 0 1 .1 1.4.3V12h2.6z" fill="white"/>
                        <path d="M26 12v12c0 2.2-1.8 4-4 4s-4-1.8-4-4c0-2.2 1.8-4 4-4 .5 0 1 .1 1.4.3V12h2.6z" fill="none" stroke="#1A4D2E" stroke-width="0.5"/>
                        
                        <!-- Decorative elements -->
                        <circle cx="12" cy="12" r="1.5" fill="white" opacity="0.6"/>
                        <circle cx="28" cy="12" r="1" fill="white" opacity="0.4"/>
                        <circle cx="12" cy="28" r="1" fill="white" opacity="0.4"/>
                        <circle cx="28" cy="28" r="1.5" fill="white" opacity="0.6"/>
                    </svg>
                </div>
                <div class="loading-brand-text">
                    <div class="loading-brand-main">Freelance</div>
                    <div class="loading-brand-sub">Music</div>
                    <div class="loading-brand-tagline">Where Talent Meets Opportunity</div>
                </div>
            </div>
            <div class="loading-spinner-container">
                <div class="loading-spinner"></div>
                <div class="loading-dots">
                    <span></span>
                    <span></span>
                    <span></span>
                </div>
            </div>
        </div>
        <div class="loading-particles">
            <div class="particle"></div>
            <div class="particle"></div>
            <div class="particle"></div>
            <div class="particle"></div>
            <div class="particle"></div>
        </div>
    </div>
    <header class="site-header">
        <div class="container header-inner">
            <a class="brand" href="#home" onclick="showPage('home')">
                <div class="logo-container">
                    <div class="logo-mark" aria-hidden="true">
                        <svg width="40" height="40" viewBox="0 0 40 40" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <defs>
                                <linearGradient id="logoGradient" x1="0%" y1="0%" x2="100%" y2="100%">
                                    <stop offset="0%" style="stop-color:#1A4D2E;stop-opacity:1" />
                                    <stop offset="50%" style="stop-color:#2D5A3D;stop-opacity:1" />
                                    <stop offset="100%" style="stop-color:#c9a33a;stop-opacity:1" />
                                </linearGradient>
                                <filter id="glow">
                                    <feGaussianBlur stdDeviation="2" result="coloredBlur"/>
                                    <feMerge> 
                                        <feMergeNode in="coloredBlur"/>
                                        <feMergeNode in="SourceGraphic"/>
                                    </feMerge>
                                </filter>
                            </defs>
                            <!-- Musical note with creative styling -->
                            <circle cx="20" cy="20" r="18" fill="url(#logoGradient)" filter="url(#glow)"/>
                            <circle cx="20" cy="20" r="15" fill="none" stroke="white" stroke-width="1" opacity="0.3"/>
                            
                            <!-- Musical note -->
                            <path d="M26 12v12c0 2.2-1.8 4-4 4s-4-1.8-4-4c0-2.2 1.8-4 4-4 .5 0 1 .1 1.4.3V12h2.6z" fill="white"/>
                            <path d="M26 12v12c0 2.2-1.8 4-4 4s-4-1.8-4-4c0-2.2 1.8-4 4-4 .5 0 1 .1 1.4.3V12h2.6z" fill="none" stroke="#1A4D2E" stroke-width="0.5"/>
                            
                            <!-- Decorative elements -->
                            <circle cx="12" cy="12" r="1.5" fill="white" opacity="0.6"/>
                            <circle cx="28" cy="12" r="1" fill="white" opacity="0.4"/>
                            <circle cx="12" cy="28" r="1" fill="white" opacity="0.4"/>
                            <circle cx="28" cy="28" r="1.5" fill="white" opacity="0.6"/>
                        </svg>
                    </div>
                    <div class="brand-text-container">
                        <div class="brand-text-main">Freelance</div>
                        <div class="brand-text-sub">Music</div>
                        <div class="brand-tagline">Where Talent Meets Opportunity</div>
                    </div>
                </div>
            </a>
            <nav class="main-nav">
                <a href="#student-dashboard" id="studentDashboardLink" class="nav-link d-none" onclick="showPage('student-dashboard')">For Learners</a>
                <a href="#teacher-dashboard" id="teacherDashboardLink" class="nav-link d-none" onclick="showPage('teacher-dashboard')">For Teachers</a>
                <a href="#admin-dashboard" id="adminDashboardLink" class="nav-link d-none" onclick="showPage('admin-dashboard')">Admin Dashboard</a>
                <span class="nav-divider"></span>
                <div class="auth-actions d-flex align-items-center">
                    <div id="loginSignupButtons">
                        <button id="loginBtn" class="btn btn-outline btn-sm me-2" data-bs-toggle="modal" data-bs-target="#loginModal">Log In</button>
                        <button id="signupBtn" class="btn btn-primary btn-sm me-2" data-bs-toggle="modal" data-bs-target="#signupModal">Sign Up</button>
                        <button id="adminBtn" class="btn btn-warning btn-sm" onclick="showAdminLogin()">Admin</button>
                    </div>
                    <div id="userInfo" class="d-none ms-auto">
                        <span class="text-primary me-3"></span>
                        <button id="logoutBtn" class="btn btn-outline btn-sm" onclick="logoutUser()">Logout</button>
                    </div>
                </div>
            </nav>
        </div>
    </header>

    <main>
        <!-- Admin Dashboard -->
        <div id="admin-dashboard" class="page-content d-none">
            <div class="container-fluid py-4">
                <div class="row mb-4">
                    <div class="col-12">
                        <div class="d-flex align-items-center justify-content-between flex-wrap gap-2">
                            <div>
                                <h1 class="h2 mb-0">Admin Dashboard</h1>
                                <p class="text-muted mb-0">Comprehensive analytics and reporting for Freelance Music platform</p>
                            </div>
                            <div>
                                <a href="#home" class="btn btn-outline-secondary" onclick="showPage('home')"><i class="fas fa-arrow-left me-1"></i> Back to Home</a>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Quick Stats -->
                <div class="row mb-4">
                    <div class="col-md-2 mb-3">
                        <div class="card bg-primary text-white">
                            <div class="card-body">
                                <div class="d-flex justify-content-between">
                                    <div>
                                        <h6 class="card-title">Total Students</h6>
                                        <h3 class="mb-0" id="totalStudents">0</h3>
                                    </div>
                                    <div class="align-self-center">
                                        <i class="fas fa-user-graduate fa-2x"></i>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-2 mb-3">
                        <div class="card bg-success text-white">
                            <div class="card-body">
                                <div class="d-flex justify-content-between">
                                    <div>
                                        <h6 class="card-title">Total Teachers</h6>
                                        <h3 class="mb-0" id="totalTeachers">0</h3>
                                    </div>
                                    <div class="align-self-center">
                                        <i class="fas fa-chalkboard-teacher fa-2x"></i>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-2 mb-3">
                        <div class="card bg-info text-white">
                            <div class="card-body">
                                <div class="d-flex justify-content-between">
                                    <div>
                                        <h6 class="card-title">Total Lessons</h6>
                                        <h3 class="mb-0" id="totalLessons">0</h3>
                                    </div>
                                    <div class="align-self-center">
                                        <i class="fas fa-calendar-check fa-2x"></i>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-2 mb-3">
                        <div class="card bg-warning text-white">
                            <div class="card-body">
                                <div class="d-flex justify-content-between">
                                    <div>
                                        <h6 class="card-title">Total Revenue</h6>
                                        <h3 class="mb-0" id="totalRevenue">$0</h3>
                                    </div>
                                    <div class="align-self-center">
                                        <i class="fas fa-dollar-sign fa-2x"></i>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-2 mb-3">
                        <div class="card bg-secondary text-white">
                            <div class="card-body">
                                <div class="d-flex justify-content-between">
                                    <div>
                                        <h6 class="card-title">Instruments</h6>
                                        <h3 class="mb-0" id="totalInstruments">0</h3>
                                    </div>
                                    <div class="align-self-center">
                                        <i class="fas fa-music fa-2x"></i>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-2 mb-3">
                        <div class="card bg-dark text-white">
                            <div class="card-body">
                                <div class="d-flex justify-content-between">
                                    <div>
                                        <h6 class="card-title">Repeat %</h6>
                                        <h3 class="mb-0" id="repeatLessonPercentage">0%</h3>
                                    </div>
                                    <div class="align-self-center">
                                        <i class="fas fa-redo fa-2x"></i>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Navigation Tabs -->
                <ul class="nav nav-tabs mb-4" id="adminTabs" role="tablist">
                    <li class="nav-item" role="presentation">
                        <button class="nav-link active" id="revenue-tab" data-bs-toggle="tab" data-bs-target="#revenue" type="button" role="tab">Revenue Report</button>
                    </li>
                    <li class="nav-item" role="presentation">
                        <button class="nav-link" id="referral-tab" data-bs-toggle="tab" data-bs-target="#referral" type="button" role="tab">Referral Report</button>
                    </li>
                    <li class="nav-item" role="presentation">
                        <button class="nav-link" id="instruments-tab" data-bs-toggle="tab" data-bs-target="#instruments" type="button" role="tab">Popular Instruments</button>
                    </li>
                    <li class="nav-item" role="presentation">
                        <button class="nav-link" id="lessons-tab" data-bs-toggle="tab" data-bs-target="#lessons" type="button" role="tab">Lessons Booked</button>
                    </li>
                    <li class="nav-item" role="presentation">
                        <button class="nav-link" id="users-tab" data-bs-toggle="tab" data-bs-target="#users" type="button" role="tab">Users Joined</button>
                    </li>
                    <li class="nav-item" role="presentation">
                        <button class="nav-link" id="repeat-tab" data-bs-toggle="tab" data-bs-target="#repeat" type="button" role="tab">Repeat Lessons</button>
                    </li>
                    <li class="nav-item" role="presentation">
                        <button class="nav-link" id="distribution-tab" data-bs-toggle="tab" data-bs-target="#distribution" type="button" role="tab">Revenue Distribution</button>
                    </li>
                </ul>

                <!-- Tab Content -->
                <div class="tab-content" id="adminTabContent">
                    <!-- Revenue Report -->
                    <div class="tab-pane fade show active" id="revenue" role="tabpanel">
                        <div class="row">
                            <div class="col-12">
                                <div class="card">
                                    <div class="card-header">
                                        <h5 class="card-title mb-0">Revenue by Quarter</h5>
                                    </div>
                                    <div class="card-body">
                                        <canvas id="revenueChart" height="100"></canvas>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Referral Report -->
                    <div class="tab-pane fade" id="referral" role="tabpanel">
                        <div class="row">
                            <div class="col-md-6">
                                <div class="card">
                                    <div class="card-header">
                                        <h5 class="card-title mb-0">How Students Found FM</h5>
                                    </div>
                                    <div class="card-body">
                                        <canvas id="referralChart" height="200"></canvas>
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-6">
                                <div class="card">
                                    <div class="card-header">
                                        <h5 class="card-title mb-0">Referral Breakdown</h5>
                                    </div>
                                    <div class="card-body">
                                        <div id="referralTable"></div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Popular Instruments -->
                    <div class="tab-pane fade" id="instruments" role="tabpanel">
                        <div class="row">
                            <div class="col-12">
                                <div class="card">
                                    <div class="card-header">
                                        <h5 class="card-title mb-0">Most Booked Instruments</h5>
                                    </div>
                                    <div class="card-body">
                                        <div id="instrumentsTable"></div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Lessons Booked -->
                    <div class="tab-pane fade" id="lessons" role="tabpanel">
                        <div class="row mb-3">
                            <div class="col-md-6">
                                <div class="btn-group" role="group">
                                    <button type="button" class="btn btn-outline-primary active" onclick="showLessonsView('table')">Table View</button>
                                    <button type="button" class="btn btn-outline-primary" onclick="showLessonsView('calendar')">Calendar View</button>
                                </div>
                            </div>
                            <div class="col-md-6">
                                <div class="input-group">
                                    <input type="text" class="form-control" id="lessonsSearch" placeholder="Search lessons...">
                                    <button class="btn btn-outline-secondary" type="button" onclick="searchLessons()">Search</button>
                                </div>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-12">
                                <div class="card">
                                    <div class="card-body">
                                        <div id="lessonsTable"></div>
                                        <div id="lessonsCalendar" class="d-none"></div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Users Joined -->
                    <div class="tab-pane fade" id="users" role="tabpanel">
                        <div class="row mb-3">
                            <div class="col-md-6">
                                <select class="form-select" id="userRoleFilter" onchange="filterUsers()">
                                    <option value="">All Users</option>
                                    <option value="student">Students Only</option>
                                    <option value="teacher">Teachers Only</option>
                                </select>
                            </div>
                            <div class="col-md-6">
                                <div class="input-group">
                                    <input type="text" class="form-control" id="usersSearch" placeholder="Search users...">
                                    <button class="btn btn-outline-secondary" type="button" onclick="searchUsers()">Search</button>
                                </div>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-12">
                                <div class="card">
                                    <div class="card-body">
                                        <div id="usersTable"></div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Repeat Lessons -->
                    <div class="tab-pane fade" id="repeat" role="tabpanel">
                        <div class="row">
                            <div class="col-md-6">
                                <div class="card">
                                    <div class="card-header">
                                        <h5 class="card-title mb-0">Repeat Rate Analysis</h5>
                                    </div>
                                    <div class="card-body">
                                        <canvas id="repeatChart" height="200"></canvas>
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-6">
                                <div class="card">
                                    <div class="card-header">
                                        <h5 class="card-title mb-0">Repeat Statistics</h5>
                                    </div>
                                    <div class="card-body">
                                        <div id="repeatStats"></div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Revenue Distribution -->
                    <div class="tab-pane fade" id="distribution" role="tabpanel">
                        <div class="row">
                            <div class="col-md-6">
                                <div class="card">
                                    <div class="card-header">
                                        <h5 class="card-title mb-0">Revenue by Instrument</h5>
                                    </div>
                                    <div class="card-body">
                                        <canvas id="instrumentRevenueChart" height="200"></canvas>
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-6">
                                <div class="card">
                                    <div class="card-header">
                                        <h5 class="card-title mb-0">Revenue by Student</h5>
                                    </div>
                                    <div class="card-body">
                                        <canvas id="studentRevenueChart" height="200"></canvas>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Teacher Dashboard -->
        <div id="teacher-dashboard" class="page-content d-none">
            <div class="container-fluid py-4">
                <div class="d-flex align-items-center justify-content-between flex-wrap gap-2 mb-4">
                    <div>
                        <h1 class="h2 mb-0">Teacher Dashboard</h1>
                        <p class="text-muted mb-0">Manage your teaching profile and lessons</p>
                    </div>
                    <div>
                        <button class="btn btn-outline-primary me-2" onclick="refreshTeacherStats()"><i class="fas fa-sync-alt me-1"></i> Refresh Stats</button>
                        <a href="#home" class="btn btn-outline-secondary" onclick="showPage('home')"><i class="fas fa-arrow-left me-1"></i> Back to Home</a>
                    </div>
                </div>

                <!-- Teacher Onboarding Form (shown if profile incomplete) -->
                <div id="teacher-onboarding" class="row justify-content-center">
                    <div class="col-lg-8">
                        <div class="card shadow-sm">
                            <div class="card-header bg-primary text-white">
                                <h4 class="mb-0"><i class="fas fa-user-plus me-2"></i>Complete Your Teacher Profile</h4>
                                <p class="mb-0 mt-1">Tell us about yourself to start teaching</p>
                            </div>
                            <div class="card-body p-4">
                                <form id="teacherOnboardingForm">
                                    <div class="row g-3">
                                        <div class="col-md-6">
                                            <label class="form-label fw-bold">Full Name *</label>
                                            <input type="text" id="teacherName" class="form-control" placeholder="Enter your full name" required>
                                        </div>
                                        <div class="col-md-6">
                                            <label class="form-label fw-bold">Instrument You Teach *</label>
                                            <select id="teacherInstrument" class="form-select" required>
                                                <option value="">Select instrument</option>
                                                <option value="Piano">Piano</option>
                                                <option value="Guitar">Guitar</option>
                                                <option value="Violin">Violin</option>
                                                <option value="Drums">Drums</option>
                                                <option value="Bass">Bass</option>
                                                <option value="Saxophone">Saxophone</option>
                                                <option value="Flute">Flute</option>
                                                <option value="Trumpet">Trumpet</option>
                                                <option value="Voice">Voice</option>
                                                <option value="Other">Other</option>
                                            </select>
                                        </div>
                                        <div class="col-md-6">
                                            <label class="form-label fw-bold">Class Full Status</label>
                                            <div class="form-check">
                                                <input class="form-check-input" type="checkbox" id="teacherClassFull">
                                                <label class="form-check-label" for="teacherClassFull">
                                                    My class is currently full
                                                </label>
                                            </div>
                                        </div>
                                        <div class="col-md-6">
                                            <label class="form-label fw-bold">Class Limit *</label>
                                            <input type="number" id="teacherClassLimit" class="form-control" min="1" max="50" placeholder="Maximum students" required>
                                        </div>
                                        <div class="col-md-6">
                                            <label class="form-label fw-bold">Email Address *</label>
                                            <input type="email" id="teacherEmail" class="form-control" placeholder="your.email@example.com" required>
                                        </div>
                                        <div class="col-12">
                                            <label class="form-label fw-bold">Bio *</label>
                                            <textarea id="teacherBio" class="form-control" rows="4" placeholder="Tell students about your teaching experience, style, and approach..." required></textarea>
                                            <div class="form-text">This will be visible to students when they search for teachers.</div>
                                        </div>
                                    </div>
                                    <div class="text-center mt-4">
                                        <button type="submit" class="btn btn-primary btn-lg px-5">
                                            <i class="fas fa-save me-2"></i>Complete Profile & Start Teaching
                                        </button>
                                    </div>
                                </form>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Teacher Dashboard Content (shown if profile complete) -->
                <div id="teacher-dashboard-content" class="d-none">
                    <!-- Dashboard Stats -->
                    <div class="row g-3 mb-4">
                        <div class="col-md-3">
                            <div class="card bg-primary text-white">
                                <div class="card-body">
                                    <div class="d-flex align-items-center">
                                        <div class="flex-shrink-0">
                                            <i class="fas fa-users fa-2x"></i>
                                        </div>
                                        <div class="flex-grow-1 ms-3">
                                            <h6 class="card-title mb-0">Total Students</h6>
                                            <h4 class="mb-0" id="totalStudents">0</h4>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-3">
                            <div class="card bg-success text-white">
                                <div class="card-body">
                                    <div class="d-flex align-items-center">
                                        <div class="flex-shrink-0">
                                            <i class="fas fa-calendar-check fa-2x"></i>
                                        </div>
                                        <div class="flex-grow-1 ms-3">
                                            <h6 class="card-title mb-0">This Week's Lessons</h6>
                                            <h4 class="mb-0" id="weeklyLessons">0</h4>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-3">
                            <div class="card bg-warning text-white">
                                <div class="card-body">
                                    <div class="d-flex align-items-center">
                                        <div class="flex-shrink-0">
                                            <i class="fas fa-dollar-sign fa-2x"></i>
                                        </div>
                                        <div class="flex-grow-1 ms-3">
                                            <h6 class="card-title mb-0">Lesson Earnings</h6>
                                            <h4 class="mb-0" id="monthlyEarnings">$0</h4>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-3">
                            <div class="card bg-info text-white">
                                <div class="card-body">
                                    <div class="d-flex align-items-center">
                                        <div class="flex-shrink-0">
                                            <i class="fas fa-dollar-sign fa-2x"></i>
                                        </div>
                                        <div class="flex-grow-1 ms-3">
                                            <h6 class="card-title mb-0">Admin Fee Payment</h6>
                                            <h4 class="mb-0" id="teacherRating">$0.00</h4>
                                            <button class="btn btn-sm btn-light mt-2" onclick="showAdminFeePaymentModal()">
                                                <i class="fas fa-credit-card me-1"></i>Pay Now
                                            </button>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Quick Actions -->
                    <div class="row g-3 mb-4">
                        <div class="col-md-6">
                            <div class="card">
                                <div class="card-header">
                                    <h5 class="mb-0"><i class="fas fa-calendar-plus me-2"></i>Set Availability</h5>
                                </div>
                                <div class="card-body">
                                    <p class="text-muted">Manage your weekly availability schedule</p>
                                    <button class="btn btn-outline-primary" onclick="showAvailabilityModal()">
                                        <i class="fas fa-clock me-1"></i>Manage Schedule
                                    </button>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-6">
                            <div class="card">
                                <div class="card-header">
                                    <h5 class="mb-0"><i class="fas fa-edit me-2"></i>Update Profile</h5>
                                </div>
                                <div class="card-body">
                                    <p class="text-muted">Edit your teaching profile and rates</p>
                                    <button class="btn btn-outline-primary" onclick="showEditProfileModal()">
                                        <i class="fas fa-user-edit me-1"></i>Edit Profile
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Upcoming Lessons -->
                    <div class="card">
                        <div class="card-header">
                            <h5 class="mb-0"><i class="fas fa-calendar-alt me-2"></i>Upcoming Lessons</h5>
                        </div>
                        <div class="card-body" id="upcomingLessons">
                            <div class="text-center py-4">
                                <i class="fas fa-calendar-times fa-3x text-muted mb-3"></i>
                                <h6 class="text-muted">No upcoming lessons</h6>
                                <p class="text-muted">Students will be able to book lessons once you set your availability.</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Student Dashboard -->
        <div id="student-dashboard" class="page-content d-none">
            <div class="container-fluid py-4">
                <div class="d-flex align-items-center justify-content-between flex-wrap gap-2 mb-4">
                    <div>
                        <h1 class="h2 mb-0">Student Dashboard</h1>
                        <p class="text-muted mb-0">Create your profile, find teachers, and book lessons</p>
                    </div>
                    <div>
                        <a href="#home" class="btn btn-outline-secondary" onclick="showPage('home')"><i class="fas fa-arrow-left me-1"></i> Back to Home</a>
                    </div>
                </div>

                <!-- Tabs -->
                <ul class="nav nav-tabs mb-4" id="studentTabs" role="tablist">
                    <li class="nav-item" role="presentation">
                        <button class="nav-link active" data-bs-toggle="tab" data-bs-target="#s-profile" type="button" role="tab">Create Profile</button>
                    </li>
                    <li class="nav-item" role="presentation">
                        <button class="nav-link" data-bs-toggle="tab" data-bs-target="#s-schedule" type="button" role="tab">Schedule Lessons</button>
                    </li>
                    <li class="nav-item" role="presentation">
                        <button class="nav-link" data-bs-toggle="tab" data-bs-target="#s-search" type="button" role="tab">Search by Instrument</button>
                    </li>
                    <li class="nav-item" role="presentation">
                        <button class="nav-link" data-bs-toggle="tab" data-bs-target="#s-payment" type="button" role="tab">Payment</button>
                    </li>
                </ul>

                <div class="tab-content">
                    <!-- Profile -->
                    <div class="tab-pane fade show active" id="s-profile" role="tabpanel">
                        <div class="row g-3">
                            <div class="col-lg-6">
                                <div class="card">
                                    <div class="card-header"><h5 class="mb-0">Student Profile</h5></div>
                                    <div class="card-body">
                                        <div class="mb-3">
                                            <label class="form-label">Full Name</label>
                                            <input type="text" id="sName" class="form-control" placeholder="John Smith">
                                        </div>
                                        <div class="mb-3">
                                            <label class="form-label">Instrument</label>
                                            <input type="text" id="sInstrument" class="form-control" placeholder="Guitar, Piano, Violin...">
                                        </div>
                                        <div class="mb-3">
                                            <label class="form-label">Contact Email</label>
                                            <input type="email" id="sEmail" class="form-control" placeholder="you@example.com">
                                        </div>
                                        <button class="btn btn-primary" onclick="saveStudentProfile()">Save Profile</button>
                                    </div>
                                </div>
                            </div>
                            <div class="col-lg-6">
                                <div class="card">
                                    <div class="card-header"><h5 class="mb-0">Profile Summary</h5></div>
                                    <div class="card-body" id="sProfileSummary">
                                        <p class="text-muted mb-0">Your saved profile will appear here.</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Schedule Lessons -->
                    <div class="tab-pane fade" id="s-schedule" role="tabpanel">
                        <div class="d-flex justify-content-between align-items-center mb-3">
                            <div class="btn-group" role="group">
                                <button type="button" class="btn btn-outline-primary active" onclick="showStudentScheduleView('table')">Table View</button>
                                <button type="button" class="btn btn-outline-primary" onclick="showStudentScheduleView('calendar')">Calendar View</button>
                            </div>
                            <div>
                                <select id="lessonType" class="form-select">
                                    <option value="virtual">Virtual</option>
                                    <option value="in-person">In-Person</option>
                                </select>
                            </div>
                        </div>
                        <div id="sScheduleTable"></div>
                        <div id="sScheduleCalendar" class="d-none"></div>
                    </div>

                    <!-- Search by Instrument -->
                    <div class="tab-pane fade" id="s-search" role="tabpanel">
                        <div class="row g-3 mb-3">
                            <div class="col-md-6">
                                <input type="text" id="sSearchInstrument" class="form-control" placeholder="e.g., Guitar">
                            </div>
                            <div class="col-md-6">
                                <button class="btn btn-primary" onclick="filterTeachersByInstrument()">Search</button>
                            </div>
                        </div>
                        <div id="sTeachersGrid"></div>
                    </div>

                    <!-- Payment -->
                    <div class="tab-pane fade" id="s-payment" role="tabpanel">
                        <div class="row g-3">
                            <div class="col-lg-6">
                                <div class="card">
                                    <div class="card-header"><h5 class="mb-0">Card Verification</h5></div>
                                    <div class="card-body">
                                        <div class="mb-3">
                                            <label class="form-label">Card Number</label>
                                            <input type="text" id="cardNumber" class="form-control" placeholder="4111 1111 1111 1111">
                                        </div>
                                        <div class="row g-2 mb-3">
                                            <div class="col-6">
                                                <label class="form-label">Expiry (MM/YY)</label>
                                                <input type="text" id="cardExpiry" class="form-control" placeholder="12/27">
                                            </div>
                                            <div class="col-6">
                                                <label class="form-label">CVV</label>
                                                <input type="text" id="cardCvv" class="form-control" placeholder="123">
                                            </div>
                                        </div>
                                        <button class="btn btn-primary" onclick="verifyStudentCard()">Verify Card</button>
                                    </div>
                                </div>
                            </div>
                            <div class="col-lg-6">
                                <div class="card">
                                    <div class="card-header"><h5 class="mb-0">Payment Summary</h5></div>
                                    <div class="card-body" id="sPaymentSummary">
                                        <p class="text-muted mb-0">No payments yet.</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Lesson Room -->
        <div id="lesson-room" class="page-content d-none">
            <div class="container-fluid py-4">
                <div class="d-flex align-items-center justify-content-between flex-wrap gap-2 mb-3">
                    <div>
                        <h1 class="h4 mb-0">Lesson Room</h1>
                        <small class="text-muted" id="lessonRoomInfo">Teacher • Instrument • Date</small>
                    </div>
                    <div>
                        <a href="#student-dashboard" class="btn btn-outline-secondary" onclick="showPage('student-dashboard')"><i class="fas fa-arrow-left me-1"></i> Back</a>
                    </div>
                </div>

                <div class="row g-3">
                    <div class="col-lg-8">
                        <div class="card">
                            <div class="card-header d-flex justify-content-between align-items-center">
                                <h5 class="mb-0">Video</h5>
                                <a id="externalLink" href="#" target="_blank" class="btn btn-sm btn-outline-primary">Open in Zoom/Meet</a>
                            </div>
                            <div class="card-body" style="height: 360px; display:grid; place-items:center; background:#0b2a1a10;">
                                <div class="text-center">
                                    <div class="mb-2">Video Placeholder</div>
                                    <small class="text-muted">(Integrate Zoom/Meet/WebRTC later)</small>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="col-lg-4">
                        <div class="card mb-3">
                            <div class="card-header"><h5 class="mb-0">Shared Notes</h5></div>
                            <div class="card-body">
                                <textarea id="lessonNotes" class="form-control" rows="6" placeholder="Write notes, assignments, and tips..."></textarea>
                            </div>
                        </div>
                        <div class="card">
                            <div class="card-header d-flex justify-content-between align-items-center">
                                <h5 class="mb-0">Sheet Music</h5>
                                <label class="btn btn-sm btn-outline-primary mb-0">
                                    Upload <input type="file" id="sheetUpload" accept="application/pdf,image/*" hidden onchange="uploadSheetMusic(event)">
                                </label>
                            </div>
                            <div class="card-body" id="sheetViewer">
                                <p class="text-muted mb-0">No sheet music yet.</p>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="card mt-3">
                    <div class="card-header"><h5 class="mb-0">Messages</h5></div>
                    <div class="card-body">
                        <div id="messageThread" class="mb-2" style="max-height:200px; overflow:auto;"></div>
                        <div class="input-group">
                            <input type="text" id="messageInput" class="form-control" placeholder="Type a message...">
                            <button class="btn btn-primary" onclick="sendLessonMessage()">Send</button>
                        </div>
                    </div>
                </div>

                <div class="d-flex justify-content-end mt-3">
                    <button class="btn btn-outline-secondary me-2" onclick="downloadIcs()">Add to Calendar</button>
                    <button class="btn btn-success" data-bs-toggle="modal" data-bs-target="#endLessonModal">End Lesson</button>
                </div>
            </div>
        </div>

        <!-- End Lesson Modal -->
        <div class="modal fade" id="endLessonModal" tabindex="-1" aria-hidden="true">
            <div class="modal-dialog">
                <div class="modal-content">
                    <div class="modal-header">
                        <h5 class="modal-title">End Lesson Summary</h5>
                        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                    </div>
                    <div class="modal-body">
                        <div class="mb-3">
                            <label class="form-label">Summary / Homework</label>
                            <textarea id="endSummary" class="form-control" rows="4" placeholder="What to practice, focus points, resources..."></textarea>
                        </div>
                        <div class="mb-3">
                            <label class="form-label">Rate this lesson</label>
                            <select id="endRating" class="form-select">
                                <option value="5">5 - Excellent</option>
                                <option value="4">4 - Good</option>
                                <option value="3">3 - Okay</option>
                                <option value="2">2 - Needs work</option>
                                <option value="1">1 - Poor</option>
                            </select>
                        </div>
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
                        <button type="button" class="btn btn-primary" onclick="saveEndLesson()">Save</button>
                    </div>
                </div>
            </div>
        </div>

        <div id="home" class="page-content">
        <section id="hero" class="hero">
            <div class="promo-ribbon">Limited time: Take a Trial Lesson — get $20 toward your next one</div>
            <div class="container hero-grid">
                <div class="hero-copy">
                    <h1 class="hero-title">
                        <span class="title-word" data-word="Become">Become</span>
                        <span class="title-word" data-word="the">the</span>
                        <span class="title-word" data-word="musician">musician</span>
                        <span class="title-word" data-word="you">you</span>
                        <span class="title-word" data-word="want">want</span>
                        <span class="title-word" data-word="to">to</span>
                        <span class="title-word" data-word="be.">be.</span>
                    </h1>
                    <p class="hero-subtitle">Live, one‑on‑one music lessons designed around you — your goals, your schedule, your sound.</p>
                    <div class="hero-actions">
                        <a href="#process" class="btn btn-primary btn-hero interactive-btn">
                            <span class="btn-text">Get started</span>
                            <span class="btn-icon">🎵</span>
                        </a>
                        <a href="#values" class="btn btn-outline btn-hero interactive-btn">
                            <span class="btn-text">Why Freelance Music</span>
                            <span class="btn-icon">✨</span>
                        </a>
                    </div>
                    <div class="hero-stats">
                        <div class="stat-item">
                            <div class="stat-number" data-target="1000">0</div>
                            <div class="stat-label">Happy Students</div>
                        </div>
                        <div class="stat-item">
                            <div class="stat-number" data-target="50">0</div>
                            <div class="stat-label">Expert Teachers</div>
                        </div>
                        <div class="stat-item">
                            <div class="stat-number" data-target="15">0</div>
                            <div class="stat-label">Instruments</div>
                        </div>
                    </div>
                    <div class="hero-notes">Superior audio • Curated teachers • Simple scheduling</div>
                </div>
                <div class="hero-visual" aria-hidden="true">
                    <div class="music-visualization">
                        <div class="music-note note-1">♪</div>
                        <div class="music-note note-2">♫</div>
                        <div class="music-note note-3">♬</div>
                        <div class="music-note note-4">♪</div>
                        <div class="music-note note-5">♫</div>
                        <div class="music-note note-6">♬</div>
                    </div>
                    <div class="floating-elements">
                        <div class="float-element element-1">🎸</div>
                        <div class="float-element element-2">🎹</div>
                        <div class="float-element element-3">🎺</div>
                        <div class="float-element element-4">🎻</div>
                        <div class="float-element element-5">🥁</div>
                    </div>
                </div>
                </div>
            </section>

        <!-- Values Section -->
        <section id="values" class="section alt reveal">
                <div class="container">
                <h2 class="section-title">Our Values</h2>
                <p class="section-lead">Quality. Respect. Progress. We champion meaningful music journeys.</p>
                <div class="grid">
                    <div class="card image-card">
                        <div class="image image-1" aria-hidden="true"></div>
                        <h3 class="card-title">Excellence</h3>
                        <p>We value craft. Every lesson aims to be the best hour of your week.</p>
                    </div>
                    <div class="card image-card">
                        <div class="image image-2" aria-hidden="true"></div>
                        <h3 class="card-title">Respect</h3>
                        <p>We build trust between learners and teachers with clarity and care.</p>
                    </div>
                    <div class="card image-card">
                        <div class="image image-3" aria-hidden="true"></div>
                        <h3 class="card-title">Growth</h3>
                        <p>Small steps, consistent practice, and celebrating each milestone.</p>
                    </div>
                </div>
            </div>
        </section>

        <!-- Culture Section -->
        <section id="culture" class="section reveal">
            <div class="container">
                <h2 class="section-title">Our Culture</h2>
                <p class="section-lead">Welcoming, focused, and human. We keep things simple and supportive.</p>
                <div class="culture-wrap">
                    <div class="culture-text">
                        <p>Freelance Music is a place where curiosity meets discipline. We celebrate the courage to start, the patience to continue, and the pride of performing. Our space is inclusive, our tools are thoughtful, and our tone is always respectful.</p>
                        <p>Whether you're preparing for your first recital or your next recording, we aim to make each interaction smooth, encouraging, and effective.</p>
                    </div>
                    <div class="culture-visual parallax" aria-hidden="true"></div>
                </div>
            </div>
        </section>

        <!-- Impact Section -->
        <section id="impact" class="section alt reveal">
            <div class="container">
                <h2 class="section-title">Our Impact</h2>
                <p class="section-lead">Making music education accessible and joyful—one lesson at a time.</p>
                <div class="impact-grid">
                    <div class="impact-card">
                        <div class="impact-num">50k+</div>
                        <div class="impact-label">Lessons completed</div>
                    </div>
                    <div class="impact-card">
                        <div class="impact-num">10k+</div>
                        <div class="impact-label">Happy learners</div>
                    </div>
                    <div class="impact-card">
                        <div class="impact-num">2k+</div>
                        <div class="impact-label">Professional teachers</div>
                    </div>
                    <div class="impact-card">
                        <div class="impact-num">95%</div>
                        <div class="impact-label">Satisfaction rate</div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Our Goal Section -->
        <section id="goal" class="section reveal">
            <div class="container">
                <h2 class="section-title">Our Goal</h2>
                <p class="section-lead">Empower anyone to learn and teach music with dignity, clarity, and momentum.</p>
                <div class="goal-wrap">
                    <div class="goal-point">
                        <div class="dot"></div>
                        <p>Lower the friction to start learning an instrument.</p>
                    </div>
                    <div class="goal-point">
                        <div class="dot"></div>
                        <p>Connect learners to the right teachers, at the right time.</p>
                            </div>
                    <div class="goal-point">
                        <div class="dot"></div>
                        <p>Make scheduling, feedback, and progress effortless.</p>
                    </div>
                </div>
            </div>
        </section>

        <!-- How It Works Section -->
        <section id="process" class="section alt reveal">
            <div class="container">
                <h2 class="section-title">How Freelance Music Works</h2>
                <p class="section-lead">A simple flow, designed for momentum.</p>
                <ol class="timeline">
                    <li class="step">
                        <span class="step-badge">1</span>
                        <div class="step-content">
                            <h3>Tell us your goals</h3>
                            <p>Share your instrument, level, and what you want to achieve.</p>
                        </div>
                    </li>
                    <li class="step">
                        <span class="step-badge">2</span>
                        <div class="step-content">
                            <h3>Match with a teacher</h3>
                            <p>We help you find the right fit—style, schedule, and budget.</p>
                        </div>
                    </li>
                    <li class="step">
                        <span class="step-badge">3</span>
                        <div class="step-content">
                            <h3>Book and learn</h3>
                            <p>Choose a time, meet virtually or in-person, and start playing.</p>
                        </div>
                    </li>
                    <li class="step">
                        <span class="step-badge">4</span>
                        <div class="step-content">
                            <h3>Track progress</h3>
                            <p>Receive feedback, resources, and next steps after each lesson.</p>
                        </div>
                    </li>
                </ol>
                    </div>
        </section>
    </main>

    <!-- Sponsors / Ad card -->
    <section class="ads-band">
        <div class="container">
            <div class="ad-card">
                <div class="ad-content">
                    <div class="ad-label" aria-label="Advertisement">Advertisement</div>
                    <h3 class="ad-title">Join MIS Major at UA</h3>
                    <p class="ad-text">Level up your career with the Management Information Systems program at The University of Alabama. Blend technology, business, and strategy to build real impact.</p>
                </div>
                <div class="ad-visual" aria-hidden="true"></div>
            </div>
        </div>
    </section>

    <!-- Feature band (audio/visual focus) -->
    <section class="feature-band">
        <div class="container feature-grid">
            <div class="feature-card">
                <h3>Hear the difference</h3>
                <p>Designed for music—clear audio, and tools that keep you focused on playing.</p>
                        </div>
            <div class="feature-card">
                <h3>See the progress</h3>
                <p>Simple visuals, shared documents, and recorded sessions to revisit any time.</p>
                    </div>
                </div>
    </section>

    <!-- Testimonials (Bootstrap Carousel) -->
    <section class="py-5">
        <div class="container">
            <h2 class="section-title mb-3">What learners say</h2>
            <div id="fmCarousel" class="carousel slide" data-bs-ride="carousel">
                <div class="carousel-indicators">
                    <button type="button" data-bs-target="#fmCarousel" data-bs-slide-to="0" class="active" aria-current="true" aria-label="Slide 1"></button>
                    <button type="button" data-bs-target="#fmCarousel" data-bs-slide-to="1" aria-label="Slide 2"></button>
                    <button type="button" data-bs-target="#fmCarousel" data-bs-slide-to="2" aria-label="Slide 3"></button>
                </div>
                <div class="carousel-inner">
                    <div class="carousel-item active">
                        <div class="row align-items-center g-3">
                            <div class="col-md-5">
                                <img src="https://images.unsplash.com/photo-1511671782779-c97d3d27a1d4?q=80&w=1200&auto=format&fit=crop" class="d-block w-100 rounded-3" alt="Piano lesson">
                            </div>
                            <div class="col-md-7">
                                <div class="p-3">
                                    <h5 class="mb-2">“The lessons fit my schedule perfectly.”</h5>
                                    <p class="text-muted mb-0">Live one-on-one sessions made it easy to progress every week.</p>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="carousel-item">
                        <div class="row align-items-center g-3">
                            <div class="col-md-5">
                                <img src="https://images.unsplash.com/photo-1490367532201-b9bc1dc483f6?q=80&w=1200&auto=format&fit=crop" class="d-block w-100 rounded-3" alt="Violin lesson">
                            </div>
                            <div class="col-md-7">
                                <div class="p-3">
                                    <h5 class="mb-2">“Matched with the right teacher fast.”</h5>
                                    <p class="text-muted mb-0">The curated matches saved me hours of searching.</p>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="carousel-item">
                        <div class="row align-items-center g-3">
                            <div class="col-md-5">
                                <img src="https://images.unsplash.com/photo-1518972559570-7cc1309f3229?q=80&w=1200&auto=format&fit=crop" class="d-block w-100 rounded-3" alt="Guitar lesson">
                            </div>
                            <div class="col-md-7">
                                <div class="p-3">
                                    <h5 class="mb-2">“Audio quality is fantastic.”</h5>
                                    <p class="text-muted mb-0">Hearing nuance made technique work so much clearer.</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <button class="carousel-control-prev" type="button" data-bs-target="#fmCarousel" data-bs-slide="prev">
                    <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                    <span class="visually-hidden">Previous</span>
                </button>
                <button class="carousel-control-next" type="button" data-bs-target="#fmCarousel" data-bs-slide="next">
                    <span class="carousel-control-next-icon" aria-hidden="true"></span>
                    <span class="visually-hidden">Next</span>
                </button>
            </div>
        </div>
    </section>
        </div>

    <footer class="site-footer">
        <div class="container footer-inner">
            <div>© <span id="year"></span> Freelance Music. All rights reserved.</div>
            
                    </div>
    </footer>

    <!-- Loading Screen -->
    <div id="loader" class="loader">
        <div class="loader-inner">
            <div class="logo-mark">FM</div>
            <div class="spin-wrap">
                <div class="spin-ring"></div>
                <div class="spin-core"></div>
                    </div>
            <div class="eq">
                <span></span><span></span><span></span><span></span><span></span>
            </div>
            <div class="loader-text">Loading your music experience...</div>
        </div>
        <!-- Floating musical notes in loader -->
        <div class="note note-1">♪</div>
        <div class="note note-2">♬</div>
        <div class="note note-3">♫</div>
        <div class="note note-4">♩</div>
        <div class="loader-image" aria-hidden="true"></div>
    </div>

    <!-- Subtle floating notes in background -->
    <div class="bg-notes">
        <span class="bg-note n1">♪</span>
        <span class="bg-note n2">♬</span>
        <span class="bg-note n3">♫</span>
        <span class="bg-note n4">♩</span>
        <span class="bg-note n5">♭</span>
        <span class="bg-note n6">♯</span>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
    <script src="resources/scripts/index.js"></script>

    <!-- Login Modal -->
    <div class="modal fade" id="loginModal" tabindex="-1" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered">
            <div class="modal-content auth-modal">
                <div class="modal-header auth-header">
                    <h5 class="modal-title">Welcome Back</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body auth-body">
                    <div id="loginError" class="alert alert-danger d-none" role="alert"></div>
                    <div id="loginSuccess" class="alert alert-success d-none" role="alert"></div>
                    
                    <form id="loginForm">
                        <div class="mb-3">
                            <label class="form-label">Email Address</label>
                            <div class="input-group">
                                <span class="input-group-text"><i class="fas fa-envelope"></i></span>
                                <input type="email" id="authLoginEmail" class="form-control auth-input" placeholder="Enter your email" required>
                            </div>
                        </div>
                        <div class="mb-3">
                            <label class="form-label">Password</label>
                            <div class="input-group">
                                <span class="input-group-text"><i class="fas fa-lock"></i></span>
                                <input type="password" id="authLoginPassword" class="form-control auth-input" placeholder="Enter your password" required>
                                <button class="btn btn-outline-secondary" type="button" onclick="togglePasswordVisibility('authLoginPassword')">
                                    <i class="fas fa-eye" id="authLoginPasswordIcon"></i>
                                </button>
                            </div>
                        </div>
                        <div class="mb-3 form-check">
                            <input type="checkbox" class="form-check-input" id="rememberMe">
                            <label class="form-check-label" for="rememberMe">Remember me</label>
                        </div>
                    </form>
                </div>
                <div class="modal-footer auth-footer">
                    <button type="button" class="btn btn-outline-secondary" data-bs-dismiss="modal">Cancel</button>
                    <button type="button" class="btn btn-primary auth-btn" onclick="performLogin()">
                        <span class="btn-text">Sign In</span>
                        <span class="btn-spinner d-none"><i class="fas fa-spinner fa-spin"></i></span>
                    </button>
                </div>
                <div class="modal-footer auth-switch">
                    <p class="text-center mb-0">Don't have an account? 
                        <a href="#" onclick="switchToSignup()" class="auth-link">Sign up here</a>
                    </p>
                </div>
            </div>
        </div>
    </div>

    <!-- Sign Up Modal -->
    <div class="modal fade" id="signupModal" tabindex="-1" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered modal-lg">
            <div class="modal-content auth-modal">
                <div class="modal-header auth-header">
                    <h5 class="modal-title">Create Your Account</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body auth-body">
                    <div id="signupError" class="alert alert-danger d-none" role="alert"></div>
                    <div id="signupSuccess" class="alert alert-success d-none" role="alert"></div>
                    
                    <form id="signupForm">
                        <div class="row g-3">
                            <div class="col-md-6">
                                <label class="form-label">First Name</label>
                                <div class="input-group">
                                    <span class="input-group-text"><i class="fas fa-user"></i></span>
                                    <input type="text" id="suFirst" class="form-control auth-input" placeholder="Enter first name" required>
                                </div>
                            </div>
                            <div class="col-md-6">
                                <label class="form-label">Last Name</label>
                                <div class="input-group">
                                    <span class="input-group-text"><i class="fas fa-user"></i></span>
                                    <input type="text" id="suLast" class="form-control auth-input" placeholder="Enter last name" required>
                                </div>
                            </div>
                            <div class="col-12">
                                <label class="form-label">Email Address</label>
                                <div class="input-group">
                                    <span class="input-group-text"><i class="fas fa-envelope"></i></span>
                                    <input type="email" id="suEmail" class="form-control auth-input" placeholder="Enter your email" required>
                                </div>
                            </div>
                            <div class="col-md-6">
                                <label class="form-label">Password</label>
                                <div class="input-group">
                                    <span class="input-group-text"><i class="fas fa-lock"></i></span>
                                    <input type="password" id="suPassword" class="form-control auth-input" placeholder="Create password" required>
                                    <button class="btn btn-outline-secondary" type="button" onclick="togglePasswordVisibility('suPassword')">
                                        <i class="fas fa-eye" id="suPasswordIcon"></i>
                                    </button>
                                </div>
                                <div class="form-text">Must be at least 6 characters</div>
                            </div>
                            <div class="col-md-6">
                                <label class="form-label">Confirm Password</label>
                                <div class="input-group">
                                    <span class="input-group-text"><i class="fas fa-lock"></i></span>
                                    <input type="password" id="suPassword2" class="form-control auth-input" placeholder="Confirm password" required>
                                    <button class="btn btn-outline-secondary" type="button" onclick="togglePasswordVisibility('suPassword2')">
                                        <i class="fas fa-eye" id="suPassword2Icon"></i>
                                    </button>
                                </div>
                            </div>
                            <div class="col-12">
                                <label class="form-label">I am a</label>
                                <div class="row g-2">
                                    <div class="col-6">
                                        <div class="form-check">
                                            <input class="form-check-input" type="radio" name="suRole" id="studentRole" value="student" checked>
                                            <label class="form-check-label" for="studentRole">
                                                <i class="fas fa-graduation-cap me-2"></i>Student
                                            </label>
                                        </div>
                                    </div>
                                    <div class="col-6">
                                        <div class="form-check">
                                            <input class="form-check-input" type="radio" name="suRole" id="teacherRole" value="teacher">
                                            <label class="form-check-label" for="teacherRole">
                                                <i class="fas fa-music me-2"></i>Teacher
                                            </label>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </form>
                </div>
                <div class="modal-footer auth-footer">
                    <button type="button" class="btn btn-outline-secondary" data-bs-dismiss="modal">Cancel</button>
                    <button type="button" class="btn btn-primary auth-btn" onclick="performSignup()">
                        <span class="btn-text">Create Account</span>
                        <span class="btn-spinner d-none"><i class="fas fa-spinner fa-spin"></i></span>
                    </button>
                </div>
                <div class="modal-footer auth-switch">
                    <p class="text-center mb-0">Already have an account? 
                        <a href="#" onclick="switchToLogin()" class="auth-link">Sign in here</a>
                    </p>
                </div>
            </div>
        </div>
    </div>

    <!-- Teacher Profile Modal -->
    <div class="modal fade" id="teacherProfileModal" tabindex="-1" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">Teacher Profile</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <div class="row">
                        <div class="col-12">
                            <label class="form-label">Full Name</label>
                            <input type="text" id="teacherName" class="form-control" placeholder="Enter your full name">
                        </div>
                        <div class="col-12">
                            <label class="form-label">Instrument</label>
                            <select id="teacherInstrument" class="form-select">
                                <option value="">Select Instrument</option>
                                <option value="Piano">Piano</option>
                                <option value="Guitar">Guitar</option>
                                <option value="Violin">Violin</option>
                                <option value="Drums">Drums</option>
                                <option value="Bass">Bass</option>
                                <option value="Saxophone">Saxophone</option>
                                <option value="Flute">Flute</option>
                                <option value="Cello">Cello</option>
                            </select>
                        </div>
                        <div class="col-12">
                            <label class="form-label">Bio</label>
                            <textarea id="teacherBio" class="form-control" rows="3" placeholder="Tell students about your teaching experience and style"></textarea>
                        </div>
                        <div class="col-12">
                            <label class="form-label">Contact Information</label>
                            <input type="text" id="teacherContact" class="form-control" placeholder="Email, phone, or preferred contact method">
                        </div>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
                    <button type="button" class="btn btn-primary" onclick="saveTeacherProfile()">Save Profile</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Teacher Edit Profile Modal -->
    <div class="modal fade" id="editProfileModal" tabindex="-1" aria-labelledby="editProfileModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="editProfileModalLabel"><i class="fas fa-user-edit me-2"></i>Edit Teacher Profile</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <form id="editProfileForm">
                        <div class="row g-3">
                            <div class="col-md-6">
                                <label class="form-label fw-bold">Full Name *</label>
                                <input type="text" id="editTeacherName" class="form-control" required>
                            </div>
                            <div class="col-md-6">
                                <label class="form-label fw-bold">Instrument You Teach *</label>
                                <select id="editTeacherInstrument" class="form-select" required>
                                    <option value="">Select instrument</option>
                                    <option value="Piano">Piano</option>
                                    <option value="Guitar">Guitar</option>
                                    <option value="Violin">Violin</option>
                                    <option value="Drums">Drums</option>
                                    <option value="Bass">Bass</option>
                                    <option value="Saxophone">Saxophone</option>
                                    <option value="Flute">Flute</option>
                                    <option value="Trumpet">Trumpet</option>
                                    <option value="Voice">Voice</option>
                                    <option value="Other">Other</option>
                                </select>
                            </div>
                            <div class="col-md-6">
                                <label class="form-label fw-bold">Class Full Status</label>
                                <div class="form-check">
                                    <input class="form-check-input" type="checkbox" id="editTeacherClassFull">
                                    <label class="form-check-label" for="editTeacherClassFull">
                                        My class is currently full
                                    </label>
                                </div>
                            </div>
                            <div class="col-md-6">
                                <label class="form-label fw-bold">Class Limit *</label>
                                <input type="number" id="editTeacherClassLimit" class="form-control" min="1" max="50" required>
                            </div>
                            <div class="col-md-6">
                                <label class="form-label fw-bold">Email Address *</label>
                                <input type="email" id="editTeacherEmail" class="form-control" required>
                            </div>
                            <div class="col-12">
                                <label class="form-label fw-bold">Bio *</label>
                                <textarea id="editTeacherBio" class="form-control" rows="4" required></textarea>
                            </div>
                        </div>
                    </form>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
                    <button type="button" class="btn btn-primary" onclick="updateTeacherProfile()">
                        <i class="fas fa-save me-1"></i>Save Changes
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Teacher Availability Modal -->
    <div class="modal fade" id="availabilityModal" tabindex="-1" aria-labelledby="availabilityModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="availabilityModalLabel"><i class="fas fa-calendar-plus me-2"></i>Manage Weekly Availability</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <div class="row g-3">
                        <div class="col-md-6">
                            <div class="card">
                                <div class="card-header">
                                    <h6 class="mb-0">Add Availability</h6>
                                </div>
                                <div class="card-body">
                                    <div class="mb-3">
                                        <label class="form-label">Day of Week</label>
                                        <select id="availabilityDay" class="form-select">
                                            <option value="">Select day</option>
                                            <option value="Monday">Monday</option>
                                            <option value="Tuesday">Tuesday</option>
                                            <option value="Wednesday">Wednesday</option>
                                            <option value="Thursday">Thursday</option>
                                            <option value="Friday">Friday</option>
                                            <option value="Saturday">Saturday</option>
                                            <option value="Sunday">Sunday</option>
                                        </select>
                                    </div>
                                    <div class="mb-3">
                                        <label class="form-label">Start Time</label>
                                        <input type="time" id="availabilityStartTime" class="form-control">
                                    </div>
                                    <div class="mb-3">
                                        <label class="form-label">End Time</label>
                                        <input type="time" id="availabilityEndTime" class="form-control">
                                    </div>
                                    <button class="btn btn-primary w-100" onclick="addTeacherAvailability()">
                                        <i class="fas fa-plus me-1"></i>Add Availability
                                    </button>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-6">
                            <div class="card">
                                <div class="card-header">
                                    <h6 class="mb-0">Current Availability</h6>
                                </div>
                                <div class="card-body" id="currentAvailabilityList">
                                    <p class="text-muted mb-0">No availability set yet.</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Payment Modal -->
    <div class="modal fade" id="paymentModal" tabindex="-1" aria-labelledby="paymentModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="paymentModalLabel">
                        <i class="fas fa-credit-card me-2"></i>Complete Payment
                    </h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <div class="row">
                        <div class="col-md-8">
                            <div class="card">
                                <div class="card-header">
                                    <h6 class="mb-0">Payment Information</h6>
                                </div>
                                <div class="card-body">
                                    <form id="paymentForm">
                                        <div class="row g-3">
                                            <div class="col-md-6">
                                                <label class="form-label">Card Number</label>
                                                <input type="text" id="cardNumber" class="form-control" placeholder="1234 5678 9012 3456" maxlength="19">
                                            </div>
                                            <div class="col-md-6">
                                                <label class="form-label">Cardholder Name</label>
                                                <input type="text" id="cardholderName" class="form-control" placeholder="John Doe">
                                            </div>
                                            <div class="col-md-4">
                                                <label class="form-label">Expiry Month</label>
                                                <select id="expiryMonth" class="form-select">
                                                    <option value="">MM</option>
                                                    <option value="01">01</option>
                                                    <option value="02">02</option>
                                                    <option value="03">03</option>
                                                    <option value="04">04</option>
                                                    <option value="05">05</option>
                                                    <option value="06">06</option>
                                                    <option value="07">07</option>
                                                    <option value="08">08</option>
                                                    <option value="09">09</option>
                                                    <option value="10">10</option>
                                                    <option value="11">11</option>
                                                    <option value="12">12</option>
                                                </select>
                                            </div>
                                            <div class="col-md-4">
                                                <label class="form-label">Expiry Year</label>
                                                <select id="expiryYear" class="form-select">
                                                    <option value="">YYYY</option>
                                                </select>
                                            </div>
                                            <div class="col-md-4">
                                                <label class="form-label">CVV</label>
                                                <input type="text" id="cvv" class="form-control" placeholder="123" maxlength="4">
                                            </div>
                                            <div class="col-12">
                                                <label class="form-label">Payment Method</label>
                                                <select id="paymentMethod" class="form-select">
                                                    <option value="">Select payment method</option>
                                                    <option value="Credit Card">Credit Card</option>
                                                    <option value="Debit Card">Debit Card</option>
                                                    <option value="PayPal">PayPal</option>
                                                    <option value="Bank Transfer">Bank Transfer</option>
                                                </select>
                                            </div>
                                        </div>
                                    </form>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-4">
                            <div class="card">
                                <div class="card-header">
                                    <h6 class="mb-0">Order Summary</h6>
                                </div>
                                <div class="card-body">
                                    <div class="d-flex justify-content-between mb-2">
                                        <span>Teacher:</span>
                                        <span id="paymentTeacherName">-</span>
                                    </div>
                                    <div class="d-flex justify-content-between mb-2">
                                        <span>Instrument:</span>
                                        <span id="paymentInstrument">-</span>
                                    </div>
                                    <div class="d-flex justify-content-between mb-2">
                                        <span>Day:</span>
                                        <span id="paymentLessonDay">-</span>
                                    </div>
                                    <hr>
                                    <div class="d-flex justify-content-between mb-2">
                                        <span>Lesson Fee:</span>
                                        <span id="paymentAmount">$0.00</span>
                                    </div>
                                    <div class="d-flex justify-content-between mb-2">
                                        <span>Processing Fee:</span>
                                        <span id="paymentProcessingFee">$0.00</span>
                                    </div>
                                    <hr>
                                    <div class="d-flex justify-content-between fw-bold">
                                        <span>Total:</span>
                                        <span id="paymentTotal">$0.00</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
                    <button type="button" class="btn btn-success" onclick="processPayment()">
                        <i class="fas fa-lock me-1"></i>Pay Now
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Admin Fee Payment Modal -->
    <div class="modal fade" id="adminFeePaymentModal" tabindex="-1" aria-labelledby="adminFeePaymentModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="adminFeePaymentModalLabel">
                        <i class="fas fa-credit-card me-2"></i>Pay Admin Fee
                    </h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <div class="row">
                        <div class="col-md-8">
                            <div class="card">
                                <div class="card-header">
                                    <h6 class="mb-0">Payment Information</h6>
                                </div>
                                <div class="card-body">
                                    <form id="adminFeePaymentForm">
                                        <div class="row g-3">
                                            <div class="col-md-6">
                                                <label class="form-label">Card Number</label>
                                                <input type="text" id="adminCardNumber" class="form-control" placeholder="1234 5678 9012 3456" maxlength="19">
                                            </div>
                                            <div class="col-md-6">
                                                <label class="form-label">Cardholder Name</label>
                                                <input type="text" id="adminCardholderName" class="form-control" placeholder="John Doe">
                                            </div>
                                            <div class="col-md-4">
                                                <label class="form-label">Expiry Month</label>
                                                <select id="adminExpiryMonth" class="form-select">
                                                    <option value="">MM</option>
                                                    <option value="01">01</option>
                                                    <option value="02">02</option>
                                                    <option value="03">03</option>
                                                    <option value="04">04</option>
                                                    <option value="05">05</option>
                                                    <option value="06">06</option>
                                                    <option value="07">07</option>
                                                    <option value="08">08</option>
                                                    <option value="09">09</option>
                                                    <option value="10">10</option>
                                                    <option value="11">11</option>
                                                    <option value="12">12</option>
                                                </select>
                                            </div>
                                            <div class="col-md-4">
                                                <label class="form-label">Expiry Year</label>
                                                <select id="adminExpiryYear" class="form-select">
                                                    <option value="">YYYY</option>
                                                </select>
                                            </div>
                                            <div class="col-md-4">
                                                <label class="form-label">CVV</label>
                                                <input type="text" id="adminCvv" class="form-control" placeholder="123" maxlength="4">
                                            </div>
                                            <div class="col-12">
                                                <label class="form-label">Payment Method</label>
                                                <select id="adminPaymentMethod" class="form-select">
                                                    <option value="">Select payment method</option>
                                                    <option value="Credit Card">Credit Card</option>
                                                    <option value="Debit Card">Debit Card</option>
                                                    <option value="PayPal">PayPal</option>
                                                    <option value="Bank Transfer">Bank Transfer</option>
                                                </select>
                                            </div>
                                        </div>
                                    </form>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-4">
                            <div class="card">
                                <div class="card-header">
                                    <h6 class="mb-0">Admin Fee Summary</h6>
                                </div>
                                <div class="card-body">
                                    <div class="d-flex justify-content-between mb-2">
                                        <span>Total Lessons:</span>
                                        <span id="adminTotalLessons">0</span>
                                    </div>
                                    <div class="d-flex justify-content-between mb-2">
                                        <span>Fee per Lesson:</span>
                                        <span>$7.50</span>
                                    </div>
                                    <hr>
                                    <div class="d-flex justify-content-between fw-bold">
                                        <span>Total Admin Fee:</span>
                                        <span id="adminTotalFee">$0.00</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
                    <button type="button" class="btn btn-success" onclick="processAdminFeePayment()">
                        <i class="fas fa-lock me-1"></i>Pay Admin Fee
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Admin Login Modal -->
    <div class="modal fade" id="adminLoginModal" tabindex="-1" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered">
            <div class="modal-content auth-modal">
                <div class="modal-header auth-header">
                    <h5 class="modal-title">Admin Access</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <form id="adminLoginForm">
                        <div class="mb-3">
                            <label for="adminEmail" class="form-label">Admin Email</label>
                            <input type="email" class="form-control" id="adminEmail" required>
                        </div>
                        <div class="mb-3">
                            <label for="adminPassword" class="form-label">Password</label>
                            <input type="password" class="form-control" id="adminPassword" required>
                        </div>
                        <div id="adminLoginMessage" class="alert d-none" role="alert"></div>
                    </form>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
                    <button type="button" class="btn btn-warning" onclick="performAdminLogin()">
                        <i class="fas fa-shield-alt me-1"></i>Login as Admin
                    </button>
                </div>
            </div>
        </div>
    </div>
</body>
</html>
